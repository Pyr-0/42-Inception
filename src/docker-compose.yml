version: '3.5'

#=====NGINX======

services:
  nginx:
    container_name: nginx
    build: ./requirements/nginx
    networks:
      - inception_network
    ports:
      - 443:443
    restart: always


# #====MARIADB====

mariadb:
  image: mariadb
  container_name: mariadb
  build: ./requirements/mariadb
  #volumes allow to store in a persistent disk the content in a local disk
  #db_data is a volume created by docker directly
  volumes:
    - mariadb_vol:/var/lib/mysql
  networks:
    - inception_network
  env_file:
    - .env
  restart: always
  #if there is any crash we restart the container automatically


# #====WORDPRESS====

wordpress:
  depends__on:
    - mysql
  image: wordpress
  ports: 
  volumes: ['./:var/www/html']
  env_file: .env
  network:
    - inception_network

networks:
  inception_network:
    driver: bridge
  volumes:
    mariadb_vol: